<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plomberie</title>

  <!-- ::CSS::::::: -->
  <link rel="stylesheet" href="servicepages.css">
  <link rel="stylesheet" href="fossetancheite.css">

  <!-- ::::::cdn icon:::::::: -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

   <!-- ::::PDF::::::::: -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>

   <style>
    @media(max-width: 1800px){
    .table thead{
		display: none;
	}

	.table, .table tbody, .table tr, .table td{
		display: block;
		width: 100%;
	}
	.table tr{
		margin-bottom:15px;
	}
	.table td{
		text-align: right;
		padding-left: 50%;
		text-align: right;
		position: relative;
	}
	.table td::before{
		content: attr(data-label);
		position: absolute;
		left:0;
		width: 50%;
		padding-left:15px;
		font-size:15px;
		font-weight: bold;
		text-align: left;
	}
}

/* :::::LOGO::::::: */
.header {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.logo {
  margin-left: auto;
}


   </style>
</head>


<body>
  

  <!-- ::::::::FORMULAIRE::::::::::: -->
  <div class="wrapper">

    <div class="inner">

      <div class="image-holder">
        <img src="image-services/logo1.png" alt="img">
      </div>

      <form action="" >

        <h3>Plomberie</h3>

        <div class="form-group">
          <input type="text" placeholder="Votre nom" class="form-control" id="nom">
          <input type="text" placeholder="Votre prenom" class="form-control" id="prenom">
        </div>


        <div class="form-wrapper">
          <input type="number" min="1" maxlength="8" placeholder="Numéro" class="form-control" id="numero">
        </div>

        <div class="form-wrapper">
          <input type="text" min="1" placeholder="Ville/Quartier" class="form-control" id="ville" >
        </div>

        <div class="form-group">
          <!-- :::::::::LES SERVICES::::::::::::: -->
          <select name="" id="selectservice" style="width: 47%;">
              <option value="" disabled selected>Service</option>
              <option value="Installation">Installation</option>
              <option value="Entretien">Entretien</option>
            </select>

            <!-- :::::::::::::::::TYPES SERVICES::::::::::::: -->
          <select name="" id="selectype" style="width: 47%; margin-left: 6%; display: none;">
            <option value="" disabled selected>Type</option>
            <option value="Batiment">Bâtiment</option>
            <option value="Champs">Champs</option>
            <option value="Usine">Usine</option>
          </select>
      </div>


       <!-- :::::::AFFICHE SERVICES BATIMENT::::::::::::: -->
       <div class="form-group" >
        <select name="" id="selectprobleme" style="width: 47%; display: none;">
            <option value="" disabled selected>Problème</option>
            <option value="Toillette">Toillette</option>
            <option value="Cuisine">Cuisine</option>
            <option value="Chateau">Château</option>
          </select>

         <!-- TYPE TOILLETTE ::::::::::::: -->
         <select name="" id="typetoillette" style="width: 47%; margin-left: 6%; display: none;">
          <option value="" disabled selected>Type Décoration</option>
          <option value="Standart">Standart</option>
          <option value="Luxe">Luxe</option>
        </select>
        
        <!-- :::TYPE CHATEAU :::::::::::::::: -->
        <select name="" id="typechateau" style="width: 47%; margin-left: 6%; display: none;">
          <option value="" disabled selected>Niveau Maison</option>
          <option value="Batiment">Bâtiment</option>
          <option value="Etage1">Etage 1</option>
          <option value="Etage2">Etage 2</option>
          <option value="Etage3">Etage 3</option>
          <option value="Etage4">Etage 4</option>
        </select>




        <!-- <div class="form-group">
          <input type="number" min="1" placeholder="Surface du toît" class="form-control" id="surface">

            <select name="" id="selectProduit">
              <option value="" disabled selected>Type Produit</option>
              <option value="Goudron Toillettes">Goudron Toillettes</option>
              <option value="Etancheité sur mur">Etancheité sur mur</option>
              <option value="Passalite Toît">Passalite Toît</option>
            </select>
        </div> -->


        <!-- TYPE CUISINE ::::::::::::: -->
        <select name="" id="typecuisine" style="width: 47%; margin-left: 6%; display: none;">
          <option value="" disabled selected>Type Décoration</option>
          <option value="Standart">Standart</option>
          <option value="Standart">Luxe</option>
        </select> 
    </div>

             <!-- :::::TYPE TOILLETTE STANDART::::::::::::: -->
            <div class="form-group">

              <input type="number" min="1" placeholder="Nombre Toillette" class="form-control" id="nombretoilette" style="display: none;">
  
              <select name="" id="typedecoration" style="width: 47%; margin-left: 6%; display: none; ">
                <option value="" disabled selected>Type Décoration</option>
                <option value="SansChauffage">Sans Chauffage</option>
                <option value="AvecChauffage">Avec Chauffage</option>
              </select>
            </div>

            <!-- :::::TYPE CUISINE STANDART::::::::::::: -->
            <div class="form-group">

              <input type="number" min="1" placeholder="Nombre Cuisine" class="form-control" id="nombrecuisine" style="display: none;">
  
              <select name="" id="typedecorationCuisine" style="width: 47%; margin-left: 6%; display: none; ">
                <option value="" disabled selected>Type Décoration</option>
                <option value="SansChauffage">Sans Chauffage</option>
                <option value="AvecChauffage">Avec Chauffage</option>
              </select>
            </div>

        

        <!-- Button Ajouter:::::::::::::: -->
      <a href="#Devis" id="septcent" class="btn" style="text-decoration: none;">
        AJOUTER 
        <span class="fas fa-chevron-right"></span>
      </a>
     
        
      </form>

    </div>
  </div>




  <!-- :::::::::::::AFFICHAGE DU FORMULAIRE::::::::::::: -->
  <div class="telechargerpdf">
  <section id="sectioncorps" style="display: none; margin-bottom: 4%;">

    <div class="header">
        <h3>Devis ?</h3>
        <img src="image-services/logo.png" alt="sss">
    </div>

    <hr style="border: 1px solid #3f0dca; margin-top: 3%; margin-bottom: 3%;">

    <div class="header2">

        <div class="container1">
            <h4>Ika Plombier</h4>
            <p>Mali</p>
            <p>Halles de Bamako </p>
        </div>
        

        <div class="container2">
            <h4>Envoyé à</h4>
            <p class="affichenom">?</p>
            <p class="afficheprenom"></p>
        </div>

        <div class="container3">
            <h4 >Ville/Quartier</h4>
            <p class="afficheville">?</p>
        </div>

        <div class="container3">
          <h4>Numéro</h4>
          <p class="affichenum">?</p>
      </div>

    </div>

    <!-- :::Tableau::::::::::::: -->
    <table class="table">

              <!-- :::::::::FORAGE ENTETE::::::::: -->
        <!-- <thead >
            <tr >
             <th>Zone</th>
             <th>Mètre</th>
             <th>Equipement</th>
             <th>Montant</th>
            </tr>
        </thead> -->

         <!-- ::::::::TABLEAU PROBLEME TOILLETTE(Bâtiment)::::::: -->
         <tbody id="tableautoillette" style="display: none;">
            <tr>
                <td data-label="Service"  >Installation</td>
                <!-- <td data-label="Type"  >Bâtiment</td> -->
                <td data-label="Nombre"> ?</td>
                <td data-label="Montant"  >?</td>
            </tr>
         </tbody>

         <!-- ::::::::TABLEAU PROBLEME CUISINE(Bâtiment)::::::: -->
         <tbody id="tableaucuisine" style="display: none;">
          <tr>
              <td data-label="Service"  >Installation</td>
              <!-- <td data-label="Type"  >Bâtiment</td> -->
              <td data-label="Nombre"> ?</td>
              <td data-label="Montant"  >?</td>
          </tr>
       </tbody>

       <!-- ::::::::TABLEAU PROBLEME CHÄTEAU(Bâtiment)::::::: -->
       <tbody id="tableauchateau" style="display: none;">
        <tr>
            <td data-label="Service"  >Installation</td>
            <td data-label="Type"  >Bâtiment</td>
            <td data-label="Problème">Château</td>
            <td data-label="Montant"  >?</td>
        </tr>
     </tbody>


     <!-- ::::::::TABLEAU ENTRETIEN ::::::::::: -->
     <tbody id="tableauentretien" style="display: none;">
      <tr>
          <td data-label="Service"  >Entretient</td>
          <td data-label="Type"  >?</td>
          <td data-label="Problème">???</td>
          <td data-label="Montant"  >?</td>
      </tr>
   </tbody>



      </table>


      <hr style="border: 1px solid #3f0dca; margin-top: 10%; margin-bottom: 2%;">

      <div class="condition">
        <h5>Conditions et paiement</h5>
        <div class="modalite">
            <div class="tranche">Le payement est dû en 2 tranches</div>
            <div class="num">
                <p>Numéro : (+223) 74 24 00 74</p>
                
            </div>
        </div>
      </div>

</section>
</div>

<!-- :::::::::::BUTTON TELECHARGEMENT:::::::::::::: -->
<button type="button" id="telecharger" style="display: none;" >Télécharger PDF</button>














<!-- ::::::::::::::::::::SCRIPT:::::::::::::::::: -->
<script>    

// ::::::::::::::AFFICHER NOM DEVIS SELECTIONNER:::::::::::::
function afficherTexteDevis() {
  var selectType = document.getElementById('selectprobleme');
  var selectService = document.getElementById('selectservice');
  var header = document.querySelector('.header');
  var texteDevis = document.createElement('h3');
  var logo = document.createElement('img');
  logo.src = 'image-services/logo.png';
  logo.style.float = 'right';

  var updateHeader = function() {
    var selectedOptionType = selectType.value;
    var selectedOptionService = selectService.value;

    if (selectedOptionService === 'Entretien') {
      texteDevis.textContent = 'Devis Entretien';
    } else if (selectedOptionType === 'Toillette') {
      texteDevis.textContent = 'Devis Toillette';
    } else if (selectedOptionType === 'Cuisine') {
      texteDevis.textContent = 'Devis Cuisine';
    } else if (selectedOptionType === 'Chateau') {
      texteDevis.textContent = 'Devis Château';
    } else {
      texteDevis.textContent = 'Devis ?';
    }
    // Supprime les anciens éléments s'ils existent dans le header
    while (header.firstChild) {
      header.removeChild(header.firstChild);
    }
    // Ajoute le nouveau texte et le logo dans le header
    header.appendChild(texteDevis);
    header.appendChild(logo);
  };
  // Ajoute les écouteurs d'événements aux deux sélecteurs
  selectType.addEventListener('change', updateHeader);
  selectService.addEventListener('change', updateHeader);
}
// Appel de la fonction pour activer le comportement
afficherTexteDevis();

// ::::::::::::::::::::::::::::::::::::



  // ::::::FONCTION QUI AFFICHE TOUT LE CONTENU S'IL Y'A UN EVENNEMENT DANS 1 DES INPUTS::::::::
  function afficherContenu() {
  var sectioncorps = document.getElementById('sectioncorps');
  var telecharger = document.getElementById('telecharger');

  // Événement pour les éléments d'entrée
  var inputs = document.querySelectorAll('input');
  for (var i = 0; i < inputs.length; i++) {
    inputs[i].addEventListener('input', function() {
    // // Appel de la fonction pour mettre à jour le montant dans le tableau
    // multiplierNombre();
      sectioncorps.style.display = 'block';
      telecharger.style.display = 'block';
    });
  }
}
afficherContenu();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT NOM SAISI:::::::::::::
function afficherNom() {
  var nomInput = document.getElementById('nom');
  var afficheNom = document.querySelector('.affichenom');

  nomInput.addEventListener('input', function() {
    var nom = nomInput.value;
    afficheNom.textContent = nom;
  });
}
afficherNom();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT PRENOM SAISI:::::::::::::
function afficherPrenom() {
  var prenomInput = document.getElementById('prenom');
  var affichePrenom = document.querySelector('.afficheprenom');

  prenomInput.addEventListener('input', function() {
    var prenom = prenomInput.value;
    affichePrenom.textContent = prenom;
  });
}
afficherPrenom();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT VILLE SAISI:::::::::::::
function afficherVille() {
  var villeInput = document.getElementById('ville');
  var afficheVille = document.querySelector('.afficheville');

  // Événement pour l'élément de saisie
  villeInput.addEventListener('input', function() {
    afficheVille.innerHTML = '<p>' + villeInput.value + '</p>';
  });
}
afficherVille();



// :::::: FONCTION QUI RECUPERE AUTOMATIQUEMENT NUMERO SAISI:::::::::::::
function afficherNumero() {
  var numeroInput = document.getElementById('numero');
  var afficheNumero = document.querySelector('.affichenum');

  // Événement pour récupérer la saisie
  numeroInput.addEventListener('input', function() {
    var numero = numeroInput.value;
    afficheNumero.textContent = numero;
  });
}
afficherNumero();


  // AFFICHE NOMBRE TOILETTE::::::::::::::
  function afficherNombreToilette() {
  var inputNombreToilette = document.getElementById('nombretoilette');
  var celluleProbleme = document.querySelector('#tableautoillette td[data-label="Nombre"]');

  inputNombreToilette.addEventListener('input', function() {
    var nombreToilette = inputNombreToilette.value;
    celluleProbleme.textContent = nombreToilette + ' Toilette(s)';
  });
}
afficherNombreToilette();

// AFFICHE NOMBRE CUISINE::::::::::::::
function afficherNombreCuisine() {
  var nombrecuisineInput = document.getElementById("nombrecuisine");
  var celluleNombreCuisine = document.querySelector("#tableaucuisine td[data-label='Nombre']");
  
  nombrecuisineInput.addEventListener("input", function() {
    var nombreCuisine = nombrecuisineInput.value;
    celluleNombreCuisine.textContent = nombreCuisine + ' Cuisine(s)';
  });
}
afficherNombreCuisine();



// :::::::::::::::::::::::::::::::::::::::::::::::::::::::::

function afficherSelectType() {
  
  var selectService = document.getElementById("selectservice");
  var selectType = document.getElementById("selectype");
  var selectProbleme = document.getElementById('selectprobleme');
  var tableToilette = document.getElementById('tableautoillette');
  var tableentretien = document.getElementById('tableauentretien');

  var typeToillette = document.getElementById('typetoillette');
  var typedecoration = document.getElementById('typedecoration');
  var typeCuisine = document.getElementById('typecuisine');



   // AFFICHER SI SELECT SERVICE EST ENTRETIEN :::::::::::::::
   selectService.addEventListener("change", function() {
    var selectedOption = selectService.value;
    
    if (selectedOption === "Entretien") {
      tableentretien.style.display = "block";
      tableauchateau.style.display = 'none';
      selectProbleme.style.display = 'none';
      tableToilette.style.display = 'none';
      tableaucuisine.style.display = 'none';
      typeToillette.style.display = 'none';
      typeCuisine.style.display = 'none';
    } else {
      tableentretien.style.display = "none";
      
    }
  });

  // AFFICHER SI SELECT SERVICE EST INSTALLATION :::::::::::::::
  selectService.addEventListener("change", function() {
    var selectedOption = selectService.value;
    
    if (selectedOption === "Installation") {
      selectType.style.display = "block";
    } else {
      selectType.style.display = "none";
    }
  });

  // AFFICHER SI SELECT TYPE EST BATIMENT :::::::::::::::
  selectType.addEventListener('change', function() {
      var selectedOption = selectType.value;

      if (selectedOption === 'Batiment') {
        selectProbleme.style.display = 'block';
        
      } else {
        selectProbleme.style.display = 'none';
      }
    });
    

     // AFFICHER LES TABLEAUX EN FONCTION DE SELECT PROBLEME(Batiment):::::::::::::::
    selectProbleme.addEventListener('change', function() {
    var selectedOption = selectProbleme.value;

    if (selectedOption === 'Toillette') {
      tableToilette.style.display = 'block';
      typeToillette.style.display = 'block';
      typeCuisine.style.display = 'none';
      tableaucuisine.style.display = 'none';
      tableauchateau.style.display = 'none';
      typechateau.style.display = 'none';
      
    }else if(selectedOption === 'Cuisine') {
      tableaucuisine.style.display = 'block';
      typeCuisine.style.display = 'block';
      typeToillette.style.display = 'none';
      tableToilette.style.display = 'none';
      tableauchateau.style.display = 'none';
      typechateau.style.display = 'none';
      
    }else if(selectedOption === 'Chateau') {
      typechateau.style.display = 'block';
      tableauchateau.style.display = 'block';
      tableToilette.style.display = 'none';
      tableaucuisine.style.display = 'none';
      typeToillette.style.display = 'none';
      typeCuisine.style.display = 'none';
    } else {
      tableauchateau.style.display = 'none';
      tableToilette.style.display = 'none';
      tableaucuisine.style.display = 'none';
      typeToillette.style.display = 'none';
      typeCuisine.style.display = 'none';
      typechateau.style.display = 'none';
    }
  });
}
afficherSelectType();


  
// <!-- :::::FONCTION QUI AFFICHE CHAMPS TYPE TOILLETTE STANDART::::::::::::: -->
function afficherTypedecoration() {
    var typetoilletteSelect = document.getElementById("typetoillette");
    var typedecorationElement = document.getElementById("typedecoration");
    var nombretoiletteElement = document.getElementById("nombretoilette");
    
    var typecuisineSelect = document.getElementById("typecuisine");
    var typedecorationCuisineElement = document.getElementById("typedecorationCuisine");
    var nombrecuisineElement = document.getElementById("nombrecuisine");


// TOILETTE::::::::::::::::::
    typetoilletteSelect.addEventListener("change", function() {
      if (typetoilletteSelect.value === "Standart") {
        nombretoiletteElement.style.display = "block";
        typedecorationElement.style.display = "block";
      } 
       else {
        typedecorationElement.style.display = "none";
      }
    });
    // CUISINE::::::::::::::::::
    typecuisineSelect.addEventListener("change", function() {
      if (typecuisineSelect.value === "Standart") {
        typedecorationCuisineElement.style.display = "block";
        nombrecuisineElement.style.display = "block";
      } 
       else {
        typedecorationCuisineElement.style.display = "none";
        // nombrecuisineElement.style.display = "none";
      }
    });
  }
  afficherTypedecoration();

  // Afficher le montant Toilette::::::::::::
  function multiplierNombre() {
  var selectDecoration = document.getElementById("typedecoration");
  var nombreToilette = document.getElementById("nombretoilette");
  var montantElement = document.querySelector("#tableautoillette td[data-label='Montant']");

  function updateMontant() {
    var selectedOption = selectDecoration.value;
    var montant;

    if (nombreToilette.value === "") {
      // Afficher le message d'erreur dans une boîte de dialogue modale
      alert("Nombre de toilette ?");
      montantElement.textContent = "?";
      return;
    }
    if (selectedOption === "SansChauffage") {
      montant = parseInt(nombreToilette.value) * 80000;
    } else if (selectedOption === "AvecChauffage") {
      montant = parseInt(nombreToilette.value) * 175000;
    } else {
      montant = "?";
    }
    montantElement.textContent = formatNumber(montant);
  }
  selectDecoration.addEventListener("change", updateMontant);
  nombreToilette.addEventListener("input", updateMontant);
}
// Fonction pour formater le nombre avec un espacement de 3 chiffres à partir de la droite et ajouter " FCFA"
function formatNumber(number) {
  var formattedNumber = number.toLocaleString("fr-FR");
  return formattedNumber + " fcfa";
}
multiplierNombre();


  // Afficher le montant Toilette::::::::::::
  function cuisineMontant() {
  var selectDecoration = document.getElementById("typedecorationCuisine");
  var nombrecuisine = document.getElementById("nombrecuisine");
  var montantElement = document.querySelector("#tableaucuisine td[data-label='Montant']");

  function calculateMontant() {
    var selectedOption = selectDecoration.value;
    var montant;

    if (nombrecuisine.value === "") {
      // Afficher le message d'erreur dans une boîte de dialogue modale
      alert("Nombre de cuisine");
      montantElement.textContent = "?";
      return;
    }
    if (selectedOption === "SansChauffage") {
      montant = parseInt(nombrecuisine.value) * 30000 ;
    } else if (selectedOption === "AvecChauffage") {
      montant = parseInt(nombrecuisine.value) * 105000 ;
    } else {
      montant = "?";
    }
    montantElement.textContent = formatNumber(montant);
  }
  selectDecoration.addEventListener("change", calculateMontant);
  nombrecuisine.addEventListener("input", calculateMontant);
}
// Fonction pour formater le nombre avec un espacement de 3 chiffres à partir de la droite et ajouter " FCFA"
function formatNumber(number) {
  var formattedNumber = number.toLocaleString("fr-FR");
  return formattedNumber + " fcfa";
}
// Appel de la fonction pour activer le comportement
cuisineMontant();




// CALCULE MONTANT CHATEAU:::::::::::::::::

function calculerMontantChateau() {
  var selectChateau = document.getElementById("typechateau");
  var montantElement = document.querySelector("#tableauchateau td[data-label='Montant']");

  function updateMontant() {
    var selectedOption = selectChateau.value;
    var montant;

    if (selectedOption === "Batiment") {
      montant = 383250;
    } else if (selectedOption === "Etage1") {
      montant = 383250 + 10000;
    } else if (selectedOption === "Etage2") {
      montant = 383250 + 10000 + 10000;
    } else if (selectedOption === "Etage3") {
      montant = 383250 + 10000 + 10000 + 10000;
    } else if (selectedOption === "Etage4") {
      montant = 383250 + 10000 + 10000 + 10000 + 10000;
    } else {
      montant = "?";
    }
    montantElement.textContent = formatNumber(montant);
  }
  // Fonction pour formater le montant avec des espaces pour les milliers et ajouter " FCFA"
  function formatNumber(number) {
    var formattedNumber = number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    return formattedNumber + " fcfa";
  }
  selectChateau.addEventListener("change", updateMontant);
}
calculerMontantChateau();










// :::::::::::PDF TELECHARGEMENT::::::::::::::::::
// Transformation en image
window.html2canvas = html2canvas;
window.jsPDF = window.jspdf.jsPDF;

function makePDF() {
  html2canvas(document.querySelector("#capture"), {
    allowTaint: true,
    useCORS: true,
    scale: 1
  }).then(canvas => {
    var img = canvas.toDataURL("image/png");

    var doc = new jsPDF();
    doc.setFont('Arial');
    doc.save("plomberie.pdf");
  });
}

function downloadPDF() {
  var element = document.querySelector(".telechargerpdf");
  html2canvas(element, {
    scale: 2,
    scrollX: 0,
    scrollY: 0,
    windowWidth: document.documentElement.offsetWidth,
    windowHeight: document.documentElement.offsetHeight,
    useCORS: true
  }).then(function (canvas) {
    var imgData = canvas.toDataURL("image/png", 1.0);
    var pdf = new jsPDF("p", "mm", "a4", true);
    var width = pdf.internal.pageSize.getWidth();
    var height = pdf.internal.pageSize.getHeight();

    pdf.addImage(imgData, "PNG", 0, 0, width, height);
    pdf.save("plomberie.pdf");
  });
}
document.getElementById("telecharger").addEventListener("click", function () {
  downloadPDF();
});

</script>


 
</body>
</html>